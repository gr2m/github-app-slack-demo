# Snapshot report for `test/integration/slack-events.test.js`

The actual snapshot is saved in `slack-events.test.js.snap`.

Generated by [AVA](https://avajs.dev).

## app_home_opened event

> logs

    [
      {
        level: 30,
        msg: 'app_home_opened event received',
      },
    ]

> boltApp.client.views.publish() calls

    [
      {
        user_id: 'U02APP3SU2J',
        view: {
          blocks: [
            {
              text: {
                text: '*Hello, GitHub!* :tada:',
                type: 'mrkdwn',
              },
              type: 'section',
            },
            {
              type: 'divider',
            },
            {
              text: {
                text: 'TODO: Put something useful in here',
                type: 'mrkdwn',
              },
              type: 'section',
            },
          ],
          callback_id: 'home_view',
          type: 'home',
        },
      },
    ]

## /hello-github unknown

> logs

    [
      {
        level: 30,
        msg: 'Received unknown subcommand',
      },
    ]

> respond calls

    [
      {
        text: `Unknown subcommand: \`unknown\`␊
        ␊
        Usage: \`/hello-github subscribe [repository]\`␊
        Example: \`/hello-github subscribe monalisa/smile\``,
      },
    ]

## /hello-github help

> logs

    [
      {
        level: 30,
        msg: 'Received help command',
      },
    ]

> respond calls

    [
      {
        text: `Usage: \`/hello-github subscribe [repository]\`␊
        Example: \`/hello-github subscribe monalisa/smile\``,
      },
    ]

## /hello-github subscribe not-a-full-repo-name

> logs

    [
      {
        level: 30,
        msg: 'Received subscribe with invalid repository',
      },
    ]

> respond calls

    [
      {
        text: `Invalid repository: \`not-a-full-repo-name\`␊
        ␊
        Usage: \`/hello-github subscribe [repository]\`␊
        Example: \`/hello-github subscribe monalisa/smile\``,
      },
    ]

## /hello-github subscribe monalisa/smile - no installation

> logs

    [
      {
        err: {
          message: '',
          name: 'HttpError',
          request: {
            headers: {
              accept: 'application/vnd.github.v3+json',
              authorization: 'bearer [REDACTED]',
              'user-agent': 'octokit.js/0.0.0-development octokit-core.js/6.1.2 Node.js/20.15.1 (darwin; arm64)',
            },
            method: 'GET',
            request: {},
            url: 'https://api.github.com/repos/monalisa/smile/installation',
          },
          response: {
            data: '',
            headers: {},
            status: 404,
            url: '',
          },
          stack: '<stack trace removed>',
          status: 404,
          type: 'HttpError',
        },
        level: 50,
        msg: 'App is not installed on repository',
        owner: 'monalisa',
        repo: 'smile',
      },
    ]

> respond calls

    [
      {
        text: 'GitHub App is not installed on `monalisa/smile`. Install at undefined/installations/new',
      },
    ]

## /hello-github subscribe monalisa/smile - no variable

> logs

    [
      {
        githubInstallationId: 1,
        level: 30,
        msg: 'Variable created in repository',
        owner: 'monalisa',
        repo: 'smile',
        slackAppId: 'A07DBJVGQ59',
        slackChannelId: 'C07DQTAMKAS',
      },
    ]

> requests

    [
      [
        'POST',
        '/repos/monalisa/smile/actions/variables',
        {
          name: 'HELLO_SLACK_SUBSCRIPTIONS',
          value: '{"A07DBJVGQ59":{"slackChannelId":"C07DQTAMKAS","githubInstallationId":1}}',
        },
      ],
    ]

> respond calls

    [
      {
        text: 'subscribed to <https://github.com/monalisa/smile|monalisa/smile>',
      },
    ]

## /hello-github subscribe monalisa/smile - existing variable

> logs

    [
      {
        githubInstallationId: 1,
        level: 30,
        msg: 'Variable updated in repository',
        owner: 'monalisa',
        repo: 'smile',
        slackAppId: 'A07DBJVGQ59',
        slackChannelId: 'C07DQTAMKAS',
      },
    ]

> requests

    [
      [
        'PATCH',
        '/repos/monalisa/smile/actions/variables/HELLO_SLACK_SUBSCRIPTIONS',
        {
          value: '{"foo":"bar","A07DBJVGQ59":{"slackChannelId":"C07DQTAMKAS","githubInstallationId":1}}',
        },
      ],
    ]

> respond calls

    [
      {
        text: 'subscribed to <https://github.com/monalisa/smile|monalisa/smile>',
      },
    ]
